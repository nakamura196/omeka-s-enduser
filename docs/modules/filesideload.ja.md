# ファイルサイドロード

[ファイルサイドロードモジュール](https://omeka.org/s/modules/FileSideload){target=_blank}は、すでにOmeka Sのインストールが行われているサーバーに保存されているメディアファイルを取り込むための機能を追加します。アイテムにメディアをアップロードする際に新しいオプションが表示されます: サーバーから個々のファイルを選択するための「Sideload」、またはファイルがいっぱいのフォルダーを選択するための「Sideload directory」です。

ファイルサイドロードは[CSVインポート](../modules/csvimport.md)と互換性があります。インストールされている場合、CSVインポートのオプションにはSideloadディレクトリ内のファイル名によってメディアを追加する機能が含まれます。CSVインポートと一緒に使用する場合は、ファイルサイドロードモジュールでのファイル削除を無効にしてください。

## ディレクトリを作成する

サーバー上にディレクトリ（フォルダー）を作成します。ファイルサイドロードモジュールのディレクトリ内や、Omeka Sのインストールと同じレベルにすることができます。

!!! 注記
	Omekaインストールの内部、モジュールディレクトリ内（`youromekainstall/modules/FileSideload/yourdirectory`）を含む任意の場所にサイドロードディレクトリを配置する場合は、インストールやモジュールの更新時にそれを削除したり移動したりしないように注意してください。サイドロードディレクトリが見つからない場合、アイテムやメディアの編集時にエラーメッセージが表示されることがあります。この問題を修正するには、モジュールの設定ページに戻ってください。

このディレクトリにファイルをアップロードまたは移動します。アクセス可能なすべてのファイルとフォルダはこのディレクトリ内にある必要があります。

モジュールからメディアとしてこれらのファイルを追加する場合、ファイル名とフォルダ名のみが表示されるので、リソースを可能な限り明確に名付けることが重要です（例えば、「StudyInScarlet_coverpage.jpg」は「img001.jpg」と比べて役立ちます）。

## 設定

モジュールをインストールした後、ディレクトリがどこにあるかモジュールに設定する必要があります。

左側のナビゲーションのモジュールページから、リストでファイルサイドロードをスクロールし、「設定」ボタンをクリックします。

ファイルサイドロードモジュールには2つの設定オプションがあります。

![設定画面の例が記入されています](../modules/modulesfiles/filesideload_config2.png)

**サイドロードディレクトリ**: サーバールートに関連するディレクトリのパスです。これは以下のようになります:

- `/var/www/html/yourinstallationpath/omeka-s/sideload-media`
- `/home/yourusername/yourwebsite.org/omeka-s/sideload-files`（共有ホスティングの場合の典型的なパス）
- `/home/yourusername/public_html/omeka-s/modules/FileSideload/sideload`（cPanelユーザの場合の典型的なパス）。

ターミナル経由でディレクトリへのシェルアクセスがある場合、`pwd`コマンドの結果をコピーして貼り付けてください。

FTPアプリケーションを使用している場合、アプリケーションのロケーションバーにあるリモートサイトのパスをコピーします。

**サイドロードされたファイルを削除しますか？**

- チェックされている場合、アイテムにメディアとして追加されたファイルはサイドロードディレクトリから削除されます。なぜなら、ファイルはOmeka Sのインストールとしてメディアとして保存されるからです。
- チェックされていない場合、ファイルはディレクトリに残り続け、手作業で削除するまで、いかなるアイテムにもメディアとして追加可能です。


アイテムへのサイドロードファイルの追加
------------------------------
ファイルサイドロードがインストールされ、設定され、ディレクトリにファイルがある場合、モジュールを使用してアイテムにメディアを追加することができます。

アイテムを編集する際に、「メディア」タブに行きます。「メディアを追加」サイドバーには、サイドロード用の2つのボタンが（コアオプションの下に）含まれています。

![編集モードのアイテムのメディアタブが表示されています。サイドバーからサイドロードの2つのエントリがすでにメインフィールドに追加されています。](../modules/modulesfiles/filesideload_browse.png)

いずれかのボタンをクリックすると、サイドロードメディアブロックが追加されます。単一のファイルの追加には2つのフィールドが作成されます：

- **タイトル**: メディアファイルに新しいタイトルを付けます（オプション）。
- **ファイル**: このドロップダウンメニューからファイルを選択します。メニューはディレクトリに表示されるファイル名を読み込みます。ドロップダウンから1つ選択し、変更を保存します。

![ドロップダウンが開いており、ファイル名が表示されているサイドロードメディアオプション](../modules/modulesfiles/filesideload_addfile.png)

ディレクトリによるメディア追加には3つのフィールドが作られます：

- **タイトル**: メディアファイルに新しいタイトルを付けます（オプション）。このタイトルは追加されたすべてのメディアに同じように適用されます。
- **ディレクトリ**: このドロップダウンメニューからフォルダを選択します。メニューはディレクトリに表示されるフォルダ名を読み込みます。
- **ディレクトリを再帰的に取り込みます**: このボックスにチェックを入れると、選択したサイドロードフォルダ中のすべてのメディア及びそのフォルダ内にあるすべてのフォルダのすべてのメディアが含まれます。

![ドロップダウンが開いており、ファイル名が表示されているサイドロードメディアオプション](../modules/modulesfiles/filesideload_directory_addfile.png)

ファイルサイドロードには、このプロセスを通じて取り込まれたときにファイルを削除するというモジュール全体の設定があることを覚えておいてください。設定が正しいことを確認したら、アイテムへの変更を保存します。サイドバーのメディアセクションにファイルまたはファイルがメディアとして追加されているのを見るはずです。

## CSVインポートとの統合

CSVインポートを使用すると、ファイルサイドロードを経由してアイテムにメディアを追加することができます。Sideloadディレクトリ内部のファイルを指すファイル名（完全なURLではない）で列を提供します。メディアソース > Sideloadにマッピングを追加します。

SideloadディレクトリとCSVインポートを使用する場合は、ファイルサイドロードモジュール設定のファイル削除設定のチェックを外すことをお勧めします。CSVインポートは、インポートジョブが失敗したり停滞したりしても、Sideloadディレクトリ内からファイルを削除する場合があります。CSVインポートがインポートしたファイルを削除する前に、常に手動で結果を確認する必要があります。