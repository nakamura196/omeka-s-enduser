# 値の隠蔽

[値の隠蔽モジュール](https://omeka.org/s/modules/RedactValues/){target=_blank} は、特定のメタデータの一部を隠すことを管理者に許可します。ログアウトしているユーザーは隠された値を常に見ることができません。編集者、監督者、またはグローバル管理者レベルのログインユーザーは、常に何が隠蔽されたかを確認できます。このモジュールにより、管理者は著者または研究者レベルのユーザーの表示可能性を設定できます。

管理者はリソースタイプを選択し、リソースをフィルターするクエリを作成し、テキストの隠蔽を行いたいプロパティを選択し、隠蔽に使用するパターンを選択し、置換テキストを入力できます。

## 隠蔽の追加

左側のナビゲーションのモジュールタブから「値の隠蔽」を選択します。「隠蔽の閲覧」ページから、右上の「隠蔽の追加」ボタンをクリックします。

![隠蔽の追加ボタン。](../modules/modulesfiles/redactValues_add-redact.png)

隠蔽を追加するときは、次の情報を提供する必要があります。

1. 隠蔽のための**ラベル**
2. 隠蔽したい**リソースタイプ**（アイテム、アイテムセット、またはメディア）
3. テキストの隠蔽を行いたい**プロパティ**
4. テキストの隠蔽時に使用する**パターン**

![ラベル、リソースタイプ、プロパティ、パターンを含む隠蔽の追加フォーム。](../modules/modulesfiles/redactValues_add.png)

リソースをフィルタリングするクエリを追加してもかまいません。クエリは「編集」ボタンから追加することができ、これは右のドロワーを開いて検索範囲を絞るオプションを提供します。あるいは、「詳細編集」を使用して、検索結果ページから直接クエリを追加することもできます。検索URLの疑問符から始まって右端までのすべてをWebブラウザのアドレスバーからコピーします。どのような場合でも、「適用」ボタンをクリックして、フォームにクエリを追加してください。クエリがなければ、指定されたリソースタイプの全リソースが隠蔽に含まれます。

![隠蔽の追加フォーム内のクエリ編集トレイ。](../modules/modulesfiles/redactValues_query.png)

また、隠蔽された値の代わりに表示される置換テキストを含むフィールドもあります。このフィールドを空白のままにしておくと、隠蔽表示の権限がないロールでは隠蔽されたフィールドが表示されません。

各隠蔽は個別の表示オプションを持っています。特定のロールタイプに隠蔽表示の権限を与えるオプションがあります。リソースを更新する権限を持つユーザーは、自動的に隠蔽テキストを表示できます。著者や研究者に権限を与えるには、それぞれのボックスをチェックしてください。通常、著者には所有しているリソースを除き値が隠蔽され、研究者には各個別の隠蔽で権限を与えない限り値が隠蔽されます。

![著者と研究者の権限チェックボックスを含む隠蔽の追加フォーム。](../modules/modulesfiles/redactValues_roles.png)

リソースを更新する権限を持つユーザーには隠蔽が適用されないことに注意してください。つまり、グローバル管理者、監督者、および編集者に対して値は決して隠蔽されません。

ログインしていないユーザーは決して隠蔽された値を見ることができません。

変更を保存するには、右上の角にある「提出」をクリックします。

## 隠蔽の管理

既に作成した隠蔽は、メインモジュール画面から管理できます。以前に追加した隠蔽を編集するには、変更したい隠蔽の横にある「編集」アイコンをクリックします。

![既存の隠蔽の編集ボタン。](../modules/modulesfiles/redactValues_edit.png)

変更を行った後、再びフォームを提出することを忘れないでください。

また、「ソート」機能を使用して、既存の隠蔽を日付またはラベルによって昇順または降順で並び替えることができます。これは右上の角にあります。

![既存の隠蔽のリストのソート機能。](../modules/modulesfiles/redactValues_sort.png)

## パターンの追加

左側のナビゲーションのモジュールタブの「値の隠蔽」の下で「パターン」を選択すると、隠蔽用の利用可能なパターンをカスタマイズできます。新しいパターンを作成するには、右上の角にある「パターン追加」ボタンを選択します。**ラベル**と**パターン**の両方を提供する必要があります。

![ラベルとパターンフィールドを含む値の隠蔽モジュールのパターン追加フォーム。](../modules/modulesfiles/redactValues_add-pattern.png)

パターンには、隠蔽される文字列を識別する正規表現パターンを入力する必要があります。パターンは[区切り文字](https://www.php.net/manual/en/regexp.reference.delimiters.php){target=_blank}で囲む必要があります。[修飾子](https://www.php.net/manual/en/reference.pcre.pattern.modifiers.php){target=_blank}を使用することができます。正規表現の詳細については、[Regular-Expressions.info](https://www.regular-expressions.info/){target=_blank} と [PCRE Patterns](https://www.php.net/manual/en/pcre.pattern.php) を参照してください。パターンを検証するには、[RegExr](https://regexr.com/){target=_blank} を使ってください。

この情報を追加した後、右上の角にある「提出」をクリックします。追加されたパターンは、隠蔽を追加する際にパターンドロップダウンメニューで表示されるようになるはずです。

![隠蔽の追加フォーム内のパターンフィールドに追加された新しいパターンの例。](../modules/modulesfiles/redactValues_pattern-dropdown.png)

<!--- 良い例／ウォークスルーが必要なので、人々が使用事例を見ることができます。また、パブリックビューのスクリーンショットも必要かもしれません。監督者や編集者がこれを使用できるか、そして、それがサイト特有で機能するかどうかもダブルチェックする必要があります。私にはわかりません。--->