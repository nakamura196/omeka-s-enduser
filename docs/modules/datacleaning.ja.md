---
タイトル: データクリーニング
---
# データクリーニング

[データクリーニングモジュール](https://omeka.org/s/modules/DataCleaning){target=_blank}は、リソースメタデータの低レベルの監査とクリーニングを行うためのものです。これはリソースメタデータを視覚化で使用するための準備をするために設計されています。

データクリーニングによって行われた変更は簡単に元に戻すことができず、破壊的になる可能性があります。このモジュールの強力な性質のために、グローバル管理者だけが使用できます。

!!! 注記
	監査を実行する前に、データの最近のバックアップを取っておいてください。多くのホストでSQLデータベースのバックアップが可能であり、アプリマネージャーを通じてインストールした場合は、Omekaインストール全体のバックアップを取ることができます。

データクリーニングを[インストールした](index.md#installing-modules)後、管理者ビューの左側のナビゲーションに追加されるモジュールが表示されます。

## 監査の実行
モジュールの下にあるデータクリーニングのセクションから、「新しい監査の準備」ボタンをページの右上の角にクリックしてください。

### 監査の準備
これにより「監査の準備」フォームが開き、レビューおよび修正したいデータに焦点を当てることができます。フォームには次の基本オプションがあります：

- **リソースタイプ**: ドロップダウンから監査するリソースタイプを選択してください。オプションにはアイテム、アイテムセット、またはメディアがあります。

- **リソースクエリ**: 「編集」ボタンをクリックして、右サイドバーにクエリビルダーインターフェースを表示します。フォームを使用して監査したいリソースの範囲を設定します。`Advanced edit`ボタンをクリックすると、クエリストリングを表示および編集できます。

- **プロパティ**: 監視するプロパティを選択します。このドロップダウンには、インストールされているすべての語彙からのすべてのプロパティが読み込まれます。開いたとき、ドロップダウンの上部はプロパティをより迅速に見つけるための検索として機能します。

- **監査列**: リソースプール内で監査されるデータの種類を設定します。`value`、`uri`、または`value-resource-id`のドロップダウンから選択します。一般的に、データタイプはこれらの列を異なる理由で使用するかもしれませんが、特に「リテラル」データタイプは`value`列を使用して値を格納し、「uri」データタイプは`uri`列を使用してURIを格納し、_値_列はURIラベルを格納し、「リソース」データタイプは`value-resource-id`を使用してリソースIDを格納します。データタイプを追加するモジュールは、これらの3つの列のいずれかにデータを割り当てます。

- **データタイプ**: 監査対象のデータタイプをドロップダウンから選択してください。これにはOmeka Sの標準データタイプだけでなく、他のモジュールによって追加された追加のデータタイプ、たとえばNumeric Data Typesも含まれます。

#### 高度なオプション

監査したいデータが含まれているプロパティとは異なる場所に修正されたデータを保存したい場合は、「target」オプションを使用してそれを行うことができます。

- **ターゲットプロパティ**: 修正を保存するプロパティとして選択します。上記のプロパティと同じ場合は、ターゲットを選択する必要はありません。このドロップダウンにはインストールされているすべての語彙からのすべてのプロパティが読み込まれます。開いたとき、ドロップダウンの上部はプロパティをより迅速に見つけるための検索として機能します。

- **ターゲット監査列**: 修正が保存される列を選択します。上記の監査列と同じ場合は、ターゲットを選択する必要はありません。オプションには`value`、`uri`、または`value_resource_id`があります。

- **ターゲットデータタイプ**: 修正が保存されるデータタイプを選択します。上記のデータタイプと同じ場合は、ターゲットを選択する必要はありません。このドロップダウンにはOmeka Sの標準データタイプだけでなく、他のモジュールによって追加された追加のデータタイプも含まれます。

関連するすべてのフィールドに情報を入力したら、右上の角にある「Submit」ボタンをクリックしてください。

いつでも「Cancel」ボタンをクリックして退出することができます。

![「アイテム」がリソースタイプとして設定されているPrepare Audit画面。リソースクエリにはアイテムセットイベントが設定されています。プロパティはSchema:location、監査列はvalue_resource_id、データタイプはResourceに設定されています。](../modules/modulesfiles/datacleaning_prepareAudit.png)

### データの監査
「監査の準備」ページで「Submit」をクリックすると、「Audit Data」ページに移動します。

ページの上部、ヘッダーの下には、編集している一意の文字列の数と何件のリソースについて編集しているかを告げるメッセージが表示されます。リソースの数は、前のページで入力した検索クエリに返されたリソースへのリンクです。

このメッセージの下には、監査されているデータを示す表があります。列は3つあります：監査列、プロパティ、データタイプ。行は「From」と「To」の2つです。続行する前に、この表の情報を再確認してください。

![監査のためのメッセージと表。この監査には18の一意の文字列があり、66件のリソースがあり、toとfromの情報は同一です。](../modules/modulesfiles/datacleaning_auditTable1.png)

以下には、監査中のすべての文字列に対して操作を行うための一連のボタンが表示されます。

- **全てをコピー**: 「From」列の全ての一意の文字列のデータを「To」列にコピーします。
- **全てをクリア**: 「To」列から全てのデータを削除します。
- **全てを検証**: 提案された変更が現在の列とデータタイプの範囲内で可能かどうかをチェックします。例えば、リテラルテキストの文字列に`value_resource_id`を設定することはできません。検証は入力が構造的に可能かどうかのみをチェックし、入力された編集が存在するかどうかはチェックしません。つまり、`value_resource_id`を実際のOmeka S IDに対応しない数字に変更することができます。
- **全てを削除**: 一意の文字列の「削除」ボックスをすべてチェックします。これにより、監査されているプロパティからのデータがnullに設定されます。このオプションを適用する場合は極度の注意を払ってください。
- **全ての削除を解除**: 一意の文字列の「削除」ボックスをすべてのチェックを外します。

次に、監査対象のすべての一意の文字列を含む表が表示されます。多くの一意の文字列を持つ監査結果がある場合は、フィルターを使用して編集したい文字列を絞り込むことができます。また、現在の監査データを含む列は、列ヘッダをクリックすることで並べ替えることができます。

この表には、文字列ごとのリソースのカウント、現在存在する一意の文字列（From:）、現在の文字列を編集するための入力ボックス（To:）、データをnullに設定するための削除チェックボックスが提供されます。それぞれの行の編集入力セルには、提案された変更をコピー、クリア、検証するためのボタンがあります。

![To列の最初の行に無効な文字列があり、検証ボタンが赤く表示されており、データタイプの不一致を示しています。To列の2行目には有効な整数データがあり、検証ボタンが緑色です。](../modules/modulesfiles/datacleaning_auditTableValidation.png)

_To_列の内容を慎重に編集したら、「Submit」ボタンをクリックしてデータの更新を実行します。モジュールの強力な性質を考慮し、決定を確認するよう求められます。データクリーニングプロセスはバックグラウンドで実行され、ジョブは確認できますが、元に戻すことはできません。

## サンプルワークフロー
特定のアイテムセット内のアイテムのタイトルを監査したいユーザーのサンプルワークフローは次のとおりです：

- 左側のナビゲーションで、データクリーニングモジュールに移動します。
- 「新しい監査の準備」ボタンをクリックします（右上）。
- 条件を選択します（情報については矢印を展開します）：
	- リソースタイプ：「アイテム」
	- リソースクエリ：item_set_id[]=1234
	- プロパティ：「ダブリンコア：タイトル」
	- 監査列：「value」
	- データタイプ：「テキスト」。
- 「高度な」セクションは無視します。
- 「Submit」をクリックします（右上）。
- 修正または削除が潜在的に必要な「From: value」列を監査します。
- 「To: value」列に正しいテキストを入力して修正を行います。
- 「削除」チェックボックスをチェックして削除を行います。
- 「Submit」をクリックします（右上）。
- 提出を確認するためにクリックします。
- 「過去の監査」ページを更新し、ジョブが「Completed」としてマークされるまで待ちます。
- アイテムを確認して、値が修正および削除されたことを確認します。