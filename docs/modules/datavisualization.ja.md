---
title: データの可視化
---
# データの可視化

[データの可視化モジュール](https://omeka.org/s/modules/Datavis){target=_blank} は、サイト管理者がデータセットを生成し、そのデータを表す図を描くことができるようにするものです。このモジュールがインストールされ、管理ダッシュボードのモジュールセクションでアクティブになると、サイトごとにデータの可視化を管理できます。ページブロックを使用して、サイトページにデータの図表を追加することができます。

## サイト別のデータの可視化
データの可視化モジュールがアクティブになると、個別のサイトのメニューにデータの可視化のセクションが表示されます。このリンクをクリックすると、そのサイトに作成されたすべての可視化のリストが表示されます。

![2つの可視化の一覧リストを閲覧](../modules/modulesfiles/dataviz_browse.png)

可視化を日付またはタイトルで昇順あるいは降順に並べ替えることができます。一括編集（削除を含む）はできませんし、既存の可視化を複製したり、他のサイトにコピーすることもできません。

### データの可視化の追加
サイトの下にあるデータの可視化リンクをクリックした後、「新しい可視化を追加」ボタンをクリックして新しい可視化を作成することができます。

次に、何を可視化したいかを選択するオプションが表示されます。選択肢には以下の5つがあります：

1. **アイテムセット内のアイテム数**、選択したアイテムセットに割り当てられているアイテムの数を可視化します。
2. **クラスを持つアイテム数**、選択したリソースクラスのインスタンスであるアイテムの数を可視化します。
3. **プロパティを持つアイテム数**、選択したプロパティを持つアイテムの数を可視化します。
4. **プロパティ値を持つアイテム数**、選択したプロパティの選択された値を持つアイテムの数を可視化します。
5. **プロパティ値の数**、選択したプロパティの値の数を可視化します。

可視化したい内容を選択したら、「次へ」ボタンをクリックします。すると「可視化の追加」ページに移動し、そこで可視化を説明し設定することができます。

- 各可視化にはタイトルが必要です。
- 可視化の詳細な説明を追加することができます。
- 検索クエリインターフェースを使用して可視化されるリソースのプールを設定します。検索クエリを入力するには、「編集」ボタンまたは「高度な編集」ボタンを選択します。このフィールドを空白のままにすると、可視化にはそのサイトに割り当てられたすべてのアイテムが含まれるようになります。
    - 「編集」を選択すると、全文検索、値で検索、クラスで検索、テンプレートで検索、アイテムセットで検索、所有者で検索するためのサイドバーが開きます。検索サイドバーの下部にある対応するボタンを選択して、「プレビュー」、「リセット」、または「適用」ができます。
    - 「高度な編集」を選択すると、提供された教科書に記入するだけで足ります。検索クエリを保存するには「適用」をクリックするか、「キャンセル」で検索を中止できます。

![プロパティ値を持つアイテム数の可視化についての詳細情報を含む「データの可視化追加」フォーム](../modules/modulesfiles/dataviz_editVisualization.png)

#### データの設定
データ設定のオプションは、最初に選択した「データセットタイプ」に反映されます：

##### アイテムセット内のアイテム数
アイテムセット内のアイテム数を作成している場合、アイテムセットボックス内をクリックしてドロップダウンメニューからアイテムセットを選択できます。この手順を完了しない場合、データセットを生成しようとしたときにエラーが発生します。

##### クラスを持つアイテム数
クラスを持つアイテム数を作成する場合、クラスボックス内をクリックしてドロップダウンメニューからクラスを選択できます。このステップを完了しない場合、データセットの生成時にエラーが発生します。

##### プロパティを持つアイテム数
プロパティを持つアイテム数を作成している場合、「プロパティ」ボックス内をクリックしてドロップダウンメニューからプロパティを選択できます。複数のプロパティを追加することができます。この手順を完了しない場合、データセットを生成しようとしたときにエラーが発生します。

##### プロパティ値を持つアイテム数
プロパティを持つアイテム数を視覚化するには、「データセット設定」のもとで2つのフィールドを完了する必要があります。「値のプロパティ」と「値」です。まず、ドロップダウンメニューを使用して値のプロパティを選択する必要があります。次に、新しい行で区切られた特定の値をテキストボックスに入力できます。これらのフィールドのいずれかを入力しなかった場合、データセットを生成しようとしたときにエラーが発生します。

##### プロパティ値の数
プロパティ値の数をカウントするデータセットを設定する場合、ドロップダウンメニューから値のプロパティを選択する必要があります。このステップを完了しない場合、データセットを生成しようとしたときにエラーが発生します。さらに、オプションとして「最小カウント」と「最大カウント」の2つの設定フィールドがあります。ボックスの右側にある上下矢印を使用するか、希望する数値を入力して、最小カウントと最大カウントを設定できます。

#### 図表の設定
図表の設定では、可視化に使用する図表の種類を選択することができます。選択肢には、棒グラフ、縦棒グラフ、円グラフがあります。

棒グラフまたは縦棒グラフを選択した場合、可視化の幅と高さ、および上、右、下、左のマージンを入力することになります。さらに、ドロップダウンメニューを使用して、値（昇順）、値（降順）、ラベル（昇順）、ラベル（降順）でデータを並べ替えることができます。

円グラフを選択した場合、幅、高さ、およびマージンのみを入力する必要があります。

初回の可視化が完成した後に図表の設定を編集して変更すると、現在の図表の設定が失われてしまいます。

データセットごとに1つの図表しか生成できず、同じ情報の複数の図表を提示する場合は、同じクエリと設定でより多くの可視化を作成します。

![縦棒グラフ用の図表設定フォーム](../modules/modulesfiles/dataviz_diagramConfig.png)

## 可視化の生成
可視化を設定したら、「保存して...」ボタンをクリックし、ボックスに「データセットを生成する」を選択して、「この可視化にとどまる」をクリックします。

![保存メニューでデータセット生成がチェックされている](../modules/modulesfiles/dataviz_saveGenerate.png)

可視化が完了すると、「表示...」ボタンをクリックし、「データセット」または「図表」を選択できます。

「データセット」を選択すると、新しいブラウザのタブが開き、JSON形式のデータセットが表示されます。

「図表」を選択すると、サイトの新しい公開ページが新しいブラウザのタブで開き、図表が含まれます。このページは、可視化が存在する限り公開状態で維持されますが、リンクを張る必要はありません。代わりに、可視化をページブロックとして挿入することができます（以下参照）。

![「クラスを持つアイテム数」オプションからの円グラフの例](modulesfiles/dataviz_piechart.png)

グラフの軸にテキストが詰まっている場合は、マージンを調整してみてください。

作業を保存し、「可視化に戻る」を選択すると、「可視化の一覧」ページに移動します。そこでは、図表やデータセットを表示したり、可視化を編集したりすることができます。

![「データセット」と「図表」が表示されたビューメニュー](../modules/modulesfiles/dataviz_viewMenu.png)

## 可視化の公開
データの可視化は、ページブロックとしてサイトページに追加することで公開されます。

新規または既存のページに「データの可視化」ブロックを追加します。「データの可視化」ブロックでは、ドロップダウンメニューを使用してページに追加したい可視化を選択します。

次に、ページの編集内容を保存します。ブロックを削除するには、ブロックの見出しにあるゴミ箱アイコンをクリックします。

![ページ内のデータの可視化ブロック](../modules/modulesfiles/dataviz_block.png)