# モジュール管理

モジュールは、Omeka Sのインストールとサイトの機能を拡張します。ダウンロードできるモジュールの一覧は[モジュールディレクトリ](https://omeka.org/s/modules/){target=_blank}にあります。各モジュールのドキュメントページにはインストール手順が記載されています。

!!! 注意
    全てのモジュールが全てのバージョンのOmekaと互換性を持つわけではなく、特に新しいモジュールが古いインストールで動作することはありません。モジュールの古いバージョンはGithubページで利用できる場合があります。モジュールディレクトリでプラグインの右側にある「Github」リンクを見つけ、Githubページの右側にある「Releases」セクションを探してください。

![管理ダッシュボードのスクリーンキャプチャでモジュールタブがアクティブです。](modulesfiles/modules_browse.png)

Omeka Sサイトにインストールされているモジュールを管理するには、[管理ダッシュボード](../admin-dashboard.md)の左側のナビゲーションにある**モジュール**セクションをクリックします。

[グローバル管理者](../admin/users.md)のみがモジュールのインストールと管理を行うことができることに注意してください。スーパーバイザーはインストールされたモジュールを閲覧することはできますが、変更はできません。その他のユーザーはこのタブにアクセスできません。

| カテゴリ | 権限 | グローバル管理者 | スーパーバイザー | 編集者 | レビュワー | 作者 | 研究者 |
|-----|-----|---|---|---|---|---|---|
| モジュール | インストール/設定 | はい | いいえ | いいえ | いいえ | いいえ | いいえ |
|  | 使用 | はい | はい | いいえ | いいえ | いいえ | いいえ |

インストールの`/modules`フォルダにアップロードされたモジュールは、モジュールのリストに表示されます。各モジュールはモジュールの名前、バージョン番号、作成者、およびその機能の要約を表示します。

モジュールのラベルの右には複数のボタンが表示されることがあります。各ボタンにはアイコンと、そのアクションを説明するラベルがあります：

- **設定**（レンチアイコン）：一部のモジュールには設定を調整する機能があります。この行のモジュールの設定を調整するには、このアイコンをクリックします。
- **有効化/無効化**（スライディングスイッチ）：モジュールが有効なときは、スライダーの背景は透明でスイッチは左側にあります。無効なときは、スライダーの背景が不透明でスイッチは右側にあります。
- **インストール/アンインストール**（矢印と長方形）：このボタンを使用してモジュールをインストールまたはアンインストールします。ボタンが緑色で矢印が下向きの場合は、モジュールをインストールできます。ボタンが赤色で矢印が上向きの場合は、モジュールをアンインストールできます。

新しいリリースがあるモジュールは、「新しいバージョンのこのモジュールが利用可能です。新しいバージョンを入手してください。」という緑色のメッセージでブラウズページに表示されます。モジュールのダウンロードページへのリンクがあります。[以下の手順に従ってモジュールを更新してください](#モジュールの更新)。これらの警告は、インストールされ有効化されたモジュールでのみ表示されます。[設定ページでこれらの通知を切り替えることができます](../admin/settings.md#general)。

![異なる状態のモジュールのリスト。一つは未インストール、一つはインストールされているが非アクティブ、二つはアクティブだが設定ボタンが表示されているのは一つだけ。リストの最後のモジュールには緑色の「新しいバージョン」バナーがあります。](modulesfiles/modules_updatemsg.png)

## Omeka Sにモジュールを追加する
Omeka Sのインストールの**モジュール**セクションに表示されるには、FTPプログラムまたはSSH接続を使用して、モジュールファイルを手動でインストールの`/modules`フォルダに追加する必要があります。

Omekaに登録されたモジュールは、Omeka Sサイトの[モジュール](https://omeka.org/s/modules/){target=_blank}ディレクトリで利用できます。その他の場所で作成者によって提供されるモジュールもあります。

FTPを使用してサイトにモジュールを追加するには：

1. コンピュータに圧縮されたモジュールをダウンロードします。
1. FTPクライアントを開き、Omeka Sのインストールがあるサーバーにログオンし、`/modules`フォルダに移動します（これはインストールのメインフォルダにあるはずです）。
1. 圧縮されたモジュールを`/modules`フォルダにアップロードします。
1. モジュールを解凍します。

!!! 注意
    `/modules`フォルダに表示されるフォルダは、バージョン番号なしでモジュールの名前を表示する必要があります。モジュールのインストール時に問題が発生している場合は、余分なフォルダレベルを作成せずにモジュールが正しく解凍されていることを確認してください。

[モジュールディレクトリ](https://omeka.org/s/modules/){target=_blank}ではなくGitHubからモジュールのフォルダをダウンロードする場合は、現在開発中のバージョンではなく、[最新リリース](https://help.github.com/en/articles/linking-to-releases){target=_blank}をダウンロードしていることを確認する必要があります。方法がわからない場合は、[GitHubのヘルプファイル](https://help.github.com/en){target=_blank}を参照してください。

SSHを使用してモジュールのgitリポジトリから直接モジュールをクローンすることもできます。これは、git、GitHub、SSHを快適に使用できる場合にのみ行ってください。

### モジュールのインストール
モジュールをインストールするには、Omeka Sインストールの管理ダッシュボードの左側のナビゲーションにあるモジュールタブに移動します。

表でモジュールを見つけ、「インストール」ボタンをクリックします。モジュールがインストールされ、自動的に有効化されます。設定オプションを持つモジュールの場合は、そのモジュールの設定ページに移動します。設定オプションを持たないモジュールの場合は、モジュールページがただリロードされ、成功メッセージが上部に表示されます。

![緑色のハイライトで「モジュールが正常にインストールされました」と書かれた成功メッセージ](modulesfiles/modules_insuccess.png)

### モジュールの有効化

インストール済みだが非アクティブなモジュールがある場合、「有効化」ボタンをクリックしてモジュールを使用します。ページがリロードされると成功メッセージが表示されます。「有効化」ボタンは、「無効化」と表示されるようになります。

![緑色のハイライトで「モジュールが正常に有効化されました」と書かれた成功メッセージ](modulesfiles/modules_acsuccess.png)

## モジュールの設定
すべてではありませんが、いくつかのモジュールにはそのモジュールの設定を構成するオプションが含まれています。アクティブなモジュールがレンチアイコンの「設定」ボタンを表示している場合は、そのモジュールの設定オプションを理解するためにクリックを進める必要があります。

各モジュールの設定オプションに関する情報は、それらのモジュールのドキュメントページにあります。

## モジュールのアンインストール

Omekaインストールから適切にモジュールが削除されると、そのモジュールがデータベースに作成した全てのテーブルが削除され、モジュールがインストールされている間に生成されたデータはすべて失われます。例えば、マッピングモジュールを使用してすべてのアイテムに地理位置データを追加した場合、マッピングをアンインストールするとそれらのフィールドはすべて削除されます。

モジュールを削除するには、インストールの逆の手順です：

1. 「無効化」ボタンをクリックしてモジュールを無効化します。
1. 「アンインストール」ボタンをクリックしてモジュールをアンインストールします。
1. ウィンドウの右側にドロワーが開き、モジュールのアンインストールを確認するよう求められます。「アンインストールを確認」をクリックして続けます。

![「このモジュールをアンインストールしてもよろしいですか？」というメッセージとともにアンインストールモジュールダイアログ](modulesfiles/modules_confirmuninstall.png)

アンインストールされたモジュールは、Omeka Sインストールの`/modules`フォルダからモジュールのフォルダが削除されない限り、モジュールページに引き続き表示されます（インストールするオプション付き）。これはFTPまたはSSHを介して行うことができます。

## モジュールの更新
FTPを使用してモジュールを更新するには：

1. Omeka Sインストールのモジュールタブから、更新するモジュールを無効化します。
1. コンピュータにモジュールの最新リリースをダウンロードします。
1. FTPクライアントを開き、Omeka Sインストールがあるサーバーにログオンします。
1. `/modules`フォルダに移動します（これはメインフォルダにあるはずです）。
1. モジュールの古いコピーをコンピュータに移動します。
1. モジュールの最新バージョンの圧縮フォルダを`/modules`フォルダにアップロードします。
1. FTPクライアントで新しいバージョンのモジュールを解凍します。
1. Omeka Sインストールのダッシュボードからモジュールタブに移動し、新しいバージョンのモジュールを有効化します。
1. 設定が保持されていること、エラーがないことを確認します。これが完了した後、コンピュータに保存した古いモジュールフォルダを安全に削除できます。

更新に問題がある場合に備えて、古いバージョンのモジュールをローカルマシンに保持し、戻さなければならない場合は、同じ更新手順を以前のバージョンのモジュールで行ってください。

更新中に問題が発生した場合は、[エラーログ](../errorLogging)を有効にし、[Omekaフォーラム](https://forum.omeka.org/c/omeka-s/modules){target=_blank}に投稿してください。